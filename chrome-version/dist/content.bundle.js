(()=>{"use strict";let e=null;function t(){e&&e.disconnect(),document.querySelectorAll("div.menu_notif_nb").forEach(e=>{e.style.display="none"}),e=new MutationObserver(()=>{document.querySelectorAll("div.menu_notif_nb").forEach(e=>{e.style.display="none"})}),e.observe(document.body,{childList:!0,subtree:!0})}function o(){e&&(e.disconnect(),e=null),document.querySelectorAll("div.menu_notif_nb").forEach(e=>{e.style.display="block"})}chrome.storage.local.get(["showNotifications"],e=>{e.showNotifications?o():t()}),chrome.runtime.onMessage.addListener((e,n,r)=>{"masquerNotifs"===e.action?t():"afficherNotifs"===e.action&&o()}),async function(){try{console.log("sideMetrics OK"),document.querySelectorAll(".gris").forEach(e=>{const t=e.textContent.toLowerCase();(t.includes("participants")||t.includes("messages"))&&(e.textContent="")}),new MutationObserver(()=>{var e=document.querySelector(".actualites_side_item");if(e){const t=document.querySelector("a.actualites_side_item > font");if(t){let o=parseInt(t.textContent.trim(),10),n="Vous n'avez pas de message";1===o?n="Vous avez un message":o>1&&(n="Vous avez des messages"),t.remove(),e.innerHTML=e.innerHTML.replace("Message(s)",n)}}const t=document.querySelectorAll('a[href="/abonnes"]'),o=document.querySelectorAll('a[href="/abonnements"]');t.forEach(function(e){e.remove()}),o.forEach(function(e){e.remove()}),document.querySelectorAll(".side_stats").forEach(e=>{e.remove()}),document.querySelectorAll(".contribution_progress").forEach(e=>{e.remove()}),document.querySelectorAll(".contribution_legend").forEach(e=>{e.remove()}),document.querySelectorAll(".side_insignes").forEach(e=>{e.remove()}),document.querySelectorAll(".side_r_content").forEach(e=>{(e.textContent.includes("Contributions appréciées")||e.textContent.includes("Contributions & insignes")||e.textContent.includes("Notez vos lectures"))&&e.remove()})}).observe(document.body,{childList:!0,subtree:!0}),function(){console.log("Ratings OK");let e=[];const t=document.querySelectorAll("div.list_livre:not(.hidden-by-script)");t&&t.forEach(e=>{const t=e.querySelector("div > div > div > div > h3"),o=e.querySelector("div > div > div > div > h3 > nobr > a");t&&(t.style.display="none",t.classList.add("processed-by-script")),o&&(o.style.display="none",o.classList.add("processed-by-script"))});const o=document.querySelectorAll("span > div.entete_critique > div.entete_login > div"),n=document.querySelector("#page_corps > div > div:nth-child(3) > div.side_l > div.livre_con > div.col.col-8 > table > tbody > tr > td:nth-child(1) > nobr");o&&o.forEach(e=>{e.style.display="none",e.classList.add("processed-by-script")}),n&&(n.remove(),n.classList.add("processed-by-script"));const r=document.querySelectorAll('[id^="rateit-range-"]');if(r&&r.forEach(e=>{e.style.display="none",e.classList.add("processed-by-script")}),document.querySelector("div.livre_con")){const t=document.querySelector("[style*='border-radius:5px']");t&&e.push(t)}const c=document.querySelector("#histogramme");c&&c.remove();const s=document.querySelectorAll("div.sgst_auteur_txt");function l(){const e=document.getElementById("lightbox");if(!e||"inherit"!==e.style.visibility)return;const t=e.querySelector("iframe");if(t)try{const e=t.contentDocument||t.contentWindow.document;if(!e)return void setTimeout(l,300);const o=e.querySelector('div[style*="margin:0px auto 7px auto"] > span[style*="color:#fbb91e"]')?.parentElement;o?(o.remove(),console.log("Élément supprimé dans l'iframe !")):console.log("Élément non trouvé dans l'iframe.")}catch(e){console.error("Erreur d'accès à l'iframe (CORS ?) :",e)}}s&&s.forEach(e=>{const t=e.querySelector("br");if(t){let e=t.nextSibling;for(;e;){const t=e.nextSibling;e.remove(),e=t}}});const i=setInterval(l,500);document.addEventListener("click",()=>{setTimeout(l,200)});const d=document.getElementById("lightbox_close")?.onclick;d&&(document.getElementById("lightbox_close").onclick=function(){d.call(this),clearInterval(i)});for(let t=0;t<e.length;t++){const o=e[t];o&&(o.setAttribute("style","display: none !important; visibility: hidden !important;"),o.classList.add("hidden-by-script"))}}(),function(){console.log("Community OK");const e=document.querySelectorAll("span.qualite > span.post_items_like");e&&e.forEach(e=>{const t=e.querySelector('[id^="myspan"]');t&&(t.style.display="none")});const t=document.querySelectorAll("span.qualite > a");t&&t.forEach(e=>{const t=e.querySelector('[id^="myspan"]');t&&(t.style.display="none")});const o=document.querySelectorAll("div.side_r > div:nth-child(8) > div.liste.row > div > div > h3");o.length>0&&o.forEach(e=>{const t=e.querySelectorAll("strong");t.length>0&&t.forEach(e=>{e.remove()});const o=e.querySelectorAll("span");o.length>0&&o.forEach(e=>{e.remove()})});const n=document.querySelectorAll("#page_corps > div > div > div.side_r > div > div > div.liste.row > div > div > h3 > span");n.length>0&&n.forEach(e=>{e.remove()});const r=document.querySelectorAll("div.fiche_lecteur > a");r.length>0&&r.forEach(e=>{e.childNodes.forEach(e=>{e.nodeType===Node.TEXT_NODE&&e.textContent.match(/\d+\s*critiques/)&&(e.textContent=e.textContent.replace(/\d+\s*critiques/,"").trim())})});const c=document.querySelector(".side_quizz_nb");c&&c.remove(),document.querySelectorAll("div.quiz_row").forEach(e=>{const t=e.querySelector("h3");t&&t.remove()}),document.querySelectorAll("div > div > div > div > h3 > a").forEach(e=>{let t=e.nextSibling;for(;t&&(t.nodeType!==Node.TEXT_NODE||!t.nodeValue.trim());)t=t.nextSibling;t&&(console.log("Texte suivant :",t.nodeValue.trim()),t.remove())});const s=document.querySelectorAll("div > div > div > a > table > tbody > tr > td > div > div > span");s&&s.forEach(e=>{e.remove()});const l=document.querySelectorAll("div > div > div > a > table > tbody > tr > td > div > span > a");l&&l.forEach(e=>{e.remove()});const i=document.querySelector("#page_corps > div > div.side_r > div > div.titre");i&&Array.from(i.childNodes).forEach(e=>{e.textContent=e.textContent.replace(/\(\d+\)/g,"")}),document.querySelectorAll("div.livre_refs").forEach(e=>{e.textContent.match(/^\d+\s*livres en commun/)&&e.remove()});const d=document.querySelectorAll("div.gris");d.length>0&&d.forEach(e=>{e.textContent.match(/^\d+\s*livres/)&&(e.textContent=e.textContent.replace(/\s?\(\+\d+\)/,"").trim())});const a=document.querySelectorAll("p.tags");a.length>0&&a.forEach(e=>{e.textContent.match(/^\d+\s*livres/)&&(e.textContent=e.textContent.replace(/\s?\(\+\d+\)/,"").trim())})}(),function(){console.log("platformMetrics OK");let e=[];const t=document.querySelector("#page_corps > div > div:nth-child(3) > div.livre_header.row > table > tbody > tr > td:nth-child(2) > div > div");t&&t.querySelectorAll("a").forEach(t=>{e.push(t)}),document.querySelectorAll(".titre_livre_elements").forEach(e=>{const t=Array.from(e.childNodes).find(e=>e.nodeType===Node.TEXT_NODE&&e.textContent.includes("★"));t&&t.remove()});const o=Array.from(document.querySelectorAll("#page_corps > div > div.livre_header.row > div > div")).find(e=>e.textContent.includes("Livres"));o&&Array.from(o.childNodes).forEach(e=>{e.textContent=e.textContent.replace(/\(\d+\)/g,"")});const n=document.querySelector("#critiques");n&&e.push(n);const r=document.querySelector("#critiques_presse");r&&e.push(r);const c=document.querySelector("#citations");c&&e.push(c);const s=document.querySelector("div.side_r");if(s){const e=new MutationObserver(()=>{const t=Array.from(s.querySelectorAll("div.titre")).find(e=>e.textContent.includes("Lecteurs")),o=Array.from(s.querySelectorAll("div.titre")).find(e=>e.textContent.includes("Autres livres de")),n=Array.from(document.querySelectorAll("div.titre")).find(e=>e.textContent.includes("Listes contenant"));if(n&&n.childNodes.forEach(e=>{e.nodeType===Node.TEXT_NODE&&(e.nodeValue=e.nodeValue.replace(/\(\d+\)/g,"").trim())}),s){const e=Array.from(s.querySelectorAll("div.titre")).find(e=>e.textContent.includes("Listes avec ce livre"));if(e){const t=e.querySelector("a");t&&(t.textContent=t.textContent.replace(/\(\d+\)/g,""))}o&&o.childNodes.forEach(e=>{e.nodeType===Node.TEXT_NODE&&e.textContent.includes("Autres livres de")&&(e.textContent=e.textContent.replace(/\(\d+\)/g,""))}),t&&t.childNodes.forEach(e=>{e.nodeType===Node.TEXT_NODE&&e.textContent.includes("Lecteurs")&&(e.textContent=e.textContent.replace(/\(\d+\)/g,""))})}e.disconnect()});e.observe(s,{childList:!0,subtree:!0})}document.querySelectorAll('iframe[src*="facebook.com"]').forEach(e=>{e.style.display="none"});const l=document.querySelectorAll(".side_l h3 nobr a");l&&l.forEach(e=>{e.style.display="none"}),e.forEach(e=>{e.childNodes.forEach(e=>{e.nodeType===Node.TEXT_NODE&&(e.textContent=e.textContent.replace(/\s*\(.*?\)\s*/g,""))})})}(),function(){document.querySelectorAll(".livre_bold a").forEach(e=>{e.href.includes("/bibliographie")?e.textContent="Livres":e.href.includes("/critiques")&&(e.textContent="Critiques")});const e=document.getElementsByClassName("titre");e.length>0&&new MutationObserver(()=>{Array.from(e).forEach(e=>{if("dvideo"===e.id)Array.from(e.childNodes).forEach(e=>{e.nodeType===Node.TEXT_NODE&&(e.textContent=e.textContent.replace(/\s*\(\d+\)/g,""))});else if(e.textContent.includes("Citations sur")||e.textContent.includes("Citations de")||e.textContent.includes("Vidéos de")||e.textContent.includes("Videos de")){const t=e.querySelector("span");t&&t.remove()}})}).observe(document.body,{childList:!0,subtree:!0});const t=document.getElementsByClassName("more");t&&Array.from(t).forEach(e=>{e.textContent=e.textContent.replace(/\s*\(\d+\)/g,"")});const o=document.querySelectorAll(".resultats_bas");o&&o.forEach(e=>{e.innerHTML=e.innerHTML.replace(/\d+(?=\s*(livres|lecteurs|lectures|participants))/g,"").trim(),e.innerHTML=e.innerHTML.replace("livres","Livres").trim(),e.innerHTML=e.innerHTML.replace("lecteurs","").trim(),e.innerHTML=e.innerHTML.replace("lectures","").trim(),e.innerHTML=e.innerHTML.replace("participants","").trim()})}(),console.log("Commercial OK"),document.querySelectorAll(".side_r_content").forEach(e=>{e.textContent.includes("Acheter ce livre sur")&&e.remove()}),function(){console.log("userMetrics OK");const e=document.querySelector("#page_corps > div > div.livre_header.row > div > div > a:nth-child(4)");e&&"Statistiques"==e.textContent&&e.remove();const t=document.getElementById("menu_user_under");if(t){const e=Array.from(t.querySelectorAll("a")).find(e=>"Statistiques"===e.textContent);e&&e.remove()}const o=document.getElementsByClassName("tiny_links dark");Array.from(o).forEach(e=>{e.textContent.includes("abonnés")?e.textContent="Abonnés":e.textContent.includes("abonnements")&&(e.textContent="Abonnements")}),document.querySelectorAll("select").forEach(e=>{e.querySelectorAll("option").forEach(e=>{e.textContent=e.textContent.replace(/\s*\(\d+\)/g,"").trim()})}),document.querySelectorAll("#page_corps > div > div.side_l > div > div.liste_fiches > div")&&document.querySelectorAll("a > div > p").forEach(e=>{e.remove()});const n=document.querySelectorAll("#form-test > div.mes_livres > div.mes_livres_con > table > tbody > tr > td.titre_livre > a.titre_livre_elements");n.length>0&&n.forEach(e=>{e.remove()});const r=document.querySelectorAll("td.lecteurs");r.length>0&&r.forEach(e=>{e.remove()});const c=document.querySelectorAll("div.styled-select");function s(e){e&&e.childNodes.forEach(e=>{e.nodeType===Node.TEXT_NODE&&/\(\d+\)/.test(e.textContent)&&(e.textContent=e.textContent.replace(/\s*\(\d+\)/g,""))})}c.length>0&&c.forEach(e=>{e.textContent.includes("Note")&&e.remove()});const l=document.getElementsByClassName("titre");l&&new MutationObserver(()=>{const e=Array.from(l).find(e=>e.textContent.includes("déserte")),t=Array.from(l).find(e=>e.textContent.includes("En train")),o=Array.from(l).find(e=>e.textContent.includes("Groupes")),n=Array.from(l).find(e=>e.textContent.includes("Mes Messages")),r=Array.from(l).find(e=>e.textContent.includes("Discussion avec")),c=Array.from(l).find(e=>e.textContent.includes("Ses listes")),i=Array.from(l).find(e=>e.textContent.includes("A échanger")),d=Array.from(l).find(e=>e.textContent.includes("thèmes de lecture communs")),a=Array.from(l).find(e=>e.textContent.includes("Citations sur"));s(e),s(t),s(o),s(n),s(r),s(c),s(i),s(d),s(a);const u=document.getElementsByClassName("tiny_links");if(u){const e=Array.from(u).find(e=>e.textContent.includes("voir tous mes livres"));e&&s(e)}document.querySelectorAll("span[style*='float:left'][style*='margin-top:15px'][style*='margin-right:2em']").forEach(e=>{if(e.textContent.includes("livre(s)  sur le thème")){const t=e.querySelector("b");t&&t.remove()}});const m=Array.from(l).find(e=>e.textContent.includes("livres en commun"));m&&!m.textContent.includes("Vous avez des livres en commun")&&(m.textContent.includes("0 livre")?m.textContent="Vous n'avez pas de livre en commun":m.textContent="Vous avez des livres en commun");const y=Array.from(l).find(e=>e.textContent.includes("thèmes de lecture communs"));y&&!y.dataset.cleaned&&(y.textContent="Vos thèmes de lecture communs",y.dataset.cleaned="true"),document.querySelectorAll("h3").forEach(e=>{if(/d[’']accord sur/.test(e.textContent)&&!e.dataset.cleaned){const t=e.querySelector("font"),o=t?parseInt(t.textContent,10):0;e.textContent=0===o?"Vous n'êtes d'accord sur aucun livre":"Vous êtes d'accord sur certains livres",e.dataset.cleaned="true"}});const v=document.querySelectorAll("div.mes_livres"),f=["/images/1blanc.gif","/images/2blanc.gif","/images/3blanc.gif","/images/4blanc.gif","/images/5blanc.gif","/images/6blanc.gif"];v.forEach(e=>{e.querySelectorAll("img").forEach(e=>{f.includes(e.getAttribute("src"))&&e.remove()})}),document.querySelectorAll("p.tags").forEach(e=>{e.querySelectorAll("nobr").forEach(e=>{e.dataset.cleaned||(e.childNodes.forEach(e=>{e.nodeType===Node.TEXT_NODE&&(e.textContent=e.textContent.replace(/\s*\(.*?\)/g,"").trim())}),e.dataset.cleaned="true")})}),document.querySelectorAll(".post_con").forEach(e=>{const t=e.querySelector('div[style*="float:right"][style*="margin-right:10px"][style*="color:#999"][style*="font-size:13px"]');t&&t.remove();const o=e.querySelector("div.gris");o&&o.remove();const n=e.querySelector("div.inside_plus_n");n&&n.remove()})}).observe(document.body,{childList:!0,subtree:!0})}()}catch(e){console.error("Erreur dans pluginLaunch :",e)}finally{!function(){const e=document.createElement("style");e.textContent="body { display: block !important; }",document.head.appendChild(e)}()}}()})();